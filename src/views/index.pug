extends templates/layout
block content
    div.row.justify-content-center
        div.col-12.p-4
            h1.text-center Issue Tracker
    div.row.px-md-4
        div.col-12.col-md-4.col-lg-3
            div.card
                h3.card-header Create new issue
                form.form-horizontal.card-body(action="/api/issues/apitest" method="POST")
                    div.form-group
                        input.form-control(type=text name="issue_title" placeholder="Issue title*")
                    div.form-group
                        textarea.form-control(name="issue_text" placeholder="Issue text*")
                    div.form-group
                        input.form-control(type=text name="created_by" placeholder="Created by*" rows="5")
                    div.form-group
                        input.form-control(type=text name="assigned_to" placeholder="(opt) Assigned to" rows="5")
                    div.form-group
                        input.form-control(type=text name="status_text" placeholder="(opt) Status text" rows="5")
                    button.btn.btn-outline-primary submit
        div.col-12.col-md-4.col-lg-3
            div.card
                h3.card-header Update issue
                form.form-horizontal.card-body(action="/api/issues/apitest" method="PUT")
                    div.form-group
                        input.form-control(type=text name="_id" placeholder="Issue id*")
                    div.form-group
                        input.form-control(type=text name="issue_title" placeholder="Issue title*")
                    div.form-group
                        textarea.form-control(name="issue_text" placeholder="Issue text*")
                    div.form-group
                        input.form-control(type=text name="created_by" placeholder="Created by*" rows="5")
                    div.form-group
                        input.form-control(type=text name="assigned_to" placeholder="(opt) Assigned to" rows="5")
                    div.form-group
                        input.form-control(type=text name="status_text" placeholder="(opt) Status text" rows="5")
                    div.form-group
                        select.form-control.custom-select(name="open")
                            option(value="true") open
                            option(value="false") closed
                    button.btn.btn-outline-warning update
        div.col-12.col-md-4.col-lg-3
            div.card
                h3.card-header Delete issue
                form.form-horizontal.card-body(action="/api/issues/apitest" method="DELETE")
                    div.form-group
                        input.form-control(type=text name="_id" placeholder="Issue id*")
                    button.btn.btn-outline-danger delete
    div.row.px-md-4#project-description
        div.col-12
            h3 User stories
            ul
                li Prevent cross site scripting (XSS attack).
                li I can POST /api/issues/{projectname} with form data containing required issue_title, issue_text, created_by, and optional assigned_to and status_text. The object saved (and returned) will include all of those fields (blank for optional no input) and also include created_on(date/time), updated_on(date/time), open(boolean, true for open, false for closed), and _id.
                li I can PUT /api/issues/{projectname} with a _id and any fields in the object with a value to object said object. Returned will be 'successfully updated' or 'could not update '+_id. This should always update updated_on. If no fields are sent return 'no updated field sent'.
                li I can DELETE /api/issues/{projectname} with a _id to completely delete an issue. If no _id is sent return '_id error', success: 'deleted '+_id, failed: 'could not delete '+_id.
                li I can GET /api/issues/{projectname} for an array of all issues on that specific project with all the information for each issue as was returned when posted.
                li I can filter my get request by also passing along any field and value in the query(ie. /api/issues/{project}?open=false). I can pass along as many fields/values as I want.
        div.col-12
            h3 Example usage
            code /api/convert?input=4gal
            br
            code /api/convert?input=1/2km
            br
            code /api/convert?input=5.4/3lbs
            br
            code /api/convert?input=kg

    if (result)
        div.row.px-md-4
            p.col-12
                code #{JSON.stringify(result)}
block footer
    footer.row.bg-dark.text-white.p-3.mt-4
        a.col-12(href="https://www.dcmf.hu/" target="_blank") codedBy
            img(src="https://www.dcmf.hu/images/dcmf-letters.png" alt="DCMF logo")